<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خانواده وینستون ایران | Winston Family Iran | عائلة وينستون إيران</title>
    <meta name="description" content="مرجع تخصصی محصولات دخانی وینستون در ایران - ارائه جدیدترین محصولات و اخبار صنعت تنباکو">
    <meta name="keywords" content="وینستون, سیگار, تنباکو, دخانیات, ایران, Winston, cigarette, tobacco">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Tahoma, Geneva, sans-serif;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            direction: rtl;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #e67e22;
        }
        
        .language-switcher {
            background: #34495e;
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .language-switcher:hover {
            background: #2c3e50;
        }
        
        /* Navigation */
        .nav {
            background: #34495e;
            padding: 10px 0;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        .nav-menu li a {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 3px;
            transition: background 0.3s;
        }
        
        .nav-menu li a:hover, .nav-menu li a.active {
            background: #e67e22;
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .content-area {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .sidebar {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }
        
        /* Bot Status */
        .bot-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .bot-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #27ae60;
        }
        
        .bot-card.error {
            border-left-color: #e74c3c;
        }
        
        .bot-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #27ae60;
            margin-left: 5px;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.error {
            background: #e74c3c;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* News and Ads */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .news-item, .ad-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-right: 4px solid #3498db;
            transition: transform 0.3s;
        }
        
        .news-item:hover, .ad-item:hover {
            transform: translateY(-2px);
        }
        
        .ad-item {
            border-right-color: #e67e22;
        }
        
        .news-item h3, .ad-item h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .news-meta, .ad-meta {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .news-content, .ad-content {
            color: #555;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .source-link {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            text-decoration: none;
            font-size: 12px;
            margin-top: 10px;
            transition: background 0.3s;
        }
        
        .source-link:hover {
            background: #2980b9;
        }
        
        /* Product Timeline */
        .timeline {
            position: relative;
            margin: 20px 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            right: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #3498db;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-right: 60px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            right: 11px;
            top: 5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #3498db;
        }
        
        .timeline-year {
            background: #e67e22;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .timeline-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Product Cards */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
        }
        
        .product-header {
            background: linear-gradient(135deg, #e67e22, #d35400);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .product-body {
            padding: 20px;
        }
        
        .product-specs {
            list-style: none;
            margin: 15px 0;
        }
        
        .product-specs li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        /* Contact Section */
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .contact-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .contact-icon {
            font-size: 48px;
            color: #e67e22;
            margin-bottom: 15px;
        }
        
        .whatsapp-btn {
            background: #25d366;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
            transition: background 0.3s;
        }
        
        .whatsapp-btn:hover {
            background: #128c7e;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Statistics */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* About Section */
        .about-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .about-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .about-icon {
            font-size: 48px;
            color: #e67e22;
            text-align: center;
            margin-bottom: 15px;
        }
        
        /* Admin Panel Styles */
        .admin-panel {
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 20px 0;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .admin-content {
            padding: 30px;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .admin-tab {
            padding: 12px 25px;
            background: transparent;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            color: #7f8c8d;
        }
        
        .admin-tab.active {
            background: #3498db;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Messages */
        .error-message {
            background: #e74c3c;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        
        .success-message {
            background: #2ecc71;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            display: none;
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .nav-menu {
                flex-direction: column;
                gap: 5px;
            }
            
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .timeline-item {
                padding-right: 40px;
            }
            
            .timeline::before {
                right: 10px;
            }
            
            .timeline-item::before {
                right: 1px;
            }
            
            .admin-tabs {
                flex-direction: column;
            }
            
            .bot-status {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .hidden {
            display: none;
        }
        
        /* Login Form Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            padding: 20px;
        }
        
        .login-form {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .login-logo {
            font-size: 28px;
            font-weight: bold;
            color: #e67e22;
            margin-bottom: 10px;
        }
        
        .login-title {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 18px;
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #e67e22, #d35400);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo" id="mainLogo">خانواده وینستون ایران</div>
                <button class="language-switcher" onclick="toggleLanguage()">
                    <span id="langText">🇺🇸 EN | 🇸🇦 عربی</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <ul class="nav-menu" id="navMenu">
                <li><a href="#" onclick="showSection('home')" class="active" id="nav-home">خانه</a></li>
                <li><a href="#" onclick="showSection('news')" id="nav-news">اخبار</a></li>
                <li><a href="#" onclick="showSection('ads')" id="nav-ads">آگهی‌ها</a></li>
                <li><a href="#" onclick="showSection('products')" id="nav-products">محصولات</a></li>
                <li><a href="#" onclick="showSection('about')" id="nav-about">درباره ما</a></li>
                <li><a href="#" onclick="showSection('contact')" id="nav-contact">تماس با ما</a></li>
                <li><a href="#" onclick="showAdminLogin()" id="adminLink">🔐 مدیریت</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Home Section -->
        <div id="home-section" class="section">
            <div class="main-content">
                <div class="content-area">
                    <h1 id="welcomeTitle">خوش آمدید به خانواده وینستون ایران</h1>
                    <p id="welcomeDesc">مرجع تخصصی محصولات دخانی وینستون در ایران. ما جدیدترین اخبار و محصولات صنعت تنباکو را هر ساعت برای شما به‌روزرسانی می‌کنیم.</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-number" id="newsCount">0</span>
                            <span class="stat-label" id="newsLabel">اخبار جمع‌آوری شده</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="adsCount">0</span>
                            <span class="stat-label" id="adsLabel">آگهی‌های فعال</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="sourcesCount">14</span>
                            <span class="stat-label" id="sourcesLabel">منابع مختلف</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">1</span>
                            <span class="stat-label" id="updateLabel">ساعت به‌روزرسانی</span>
                        </div>
                    </div>

                    <div class="bot-status">
                        <div class="bot-card" id="newsBot">
                            <h4 id="newsBotTitle">🗞️ ربات جمع‌آوری اخبار <span class="status-indicator"></span></h4>
                            <p id="newsBotStatus">آخرین به‌روزرسانی: <span id="newsLastUpdate">در حال بارگذاری...</span></p>
                            <p id="newsBotSources">منابع: JTI.com, BAT.com, PMI.com, Tobacco.com, CigTehran.shop, KT&G.com, Wikipedia, TobaccoReporter.com</p>
                        </div>
                        <div class="bot-card" id="adsBot">
                            <h4 id="adsBotTitle">📢 ربات جمع‌آوری آگهی‌ها <span class="status-indicator"></span></h4>
                            <p id="adsBotStatus">آخرین به‌روزرسانی: <span id="adsLastUpdate">در حال بارگذاری...</span></p>
                            <p id="adsBotSources">منابع: دیوار، شیپور، ایمالز، علی‌بابا، آمازون، eBay</p>
                        </div>
                    </div>
                </div>

                <div class="sidebar">
                    <h3 id="latestNewsTitle">آخرین اخبار</h3>
                    <div id="latestNews">
                        <div class="loading"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- News Section -->
        <div id="news-section" class="section hidden">
            <div class="content-area">
                <h2 id="newsPageTitle">اخبار صنعت تنباکو</h2>
                <p id="newsPageDesc">اخبار به‌روزرسانی هر ساعت از منابع معتبر جهانی</p>
                <div class="form-group">
                    <input type="text" id="newsSearch" placeholder="جستجو در اخبار..." onkeyup="filterNews()">
                </div>
                <div class="news-grid" id="newsGrid">
                    <!-- News items will be populated here -->
                </div>
            </div>
        </div>

        <!-- Ads Section -->
        <div id="ads-section" class="section hidden">
            <div class="content-area">
                <h2 id="adsPageTitle">آگهی‌های خرید و فروش</h2>
                <p id="adsPageDesc">آگهی‌های به‌روزرسانی هر ساعت از سایت‌های مختلف</p>
                <div class="form-group">
                    <input type="text" id="adsSearch" placeholder="جستجو در آگهی‌ها..." onkeyup="filterAds()">
                </div>
                <div class="news-grid" id="adsGrid">
                    <!-- Ads items will be populated here -->
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <div id="products-section" class="section hidden">
            <div class="content-area">
                <h2 id="productsPageTitle">تاریخچه محصولات وینستون</h2>
                <p id="productsPageDesc">سیر تاریخی تحولات وینستون از ابتدای تشکیل تا سال 2025</p>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-year">1875</div>
                        <div class="timeline-content">
                            <h3>تأسیس شرکت R.J. Reynolds</h3>
                            <p>ریچارد جاشوا رینولدز شرکت R.J. Reynolds Tobacco Company را در وینستون-سیلم، کارولینای شمالی تأسیس کرد.</p>
                            <a href="https://en.wikipedia.org/wiki/R._J._Reynolds_Tobacco_Company" class="source-link" target="_blank">منبع: Wikipedia</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">1954</div>
                        <div class="timeline-content">
                            <h3>معرفی سیگار وینستون</h3>
                            <p>اولین سیگار وینستون با فیلتر معرفی شد و به سرعت محبوبیت یافت. شعار "Winston tastes good like a cigarette should" مشهور شد.</p>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">1972</div>
                        <div class="timeline-content">
                            <h3>وینستون در بازار جهانی</h3>
                            <p>وینستون به یکی از برندهای پرفروش جهان تبدیل شد و صادرات بین‌المللی آغاز شد.</p>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">1999</div>
                        <div class="timeline-content">
                            <h3>انتقال به Japan Tobacco International</h3>
                            <p>برند وینستون به Japan Tobacco International (JTI) منتقل شد و توسعه جهانی بیشتری یافت.</p>
                            <a href="https://www.jti.com/about-jti/our-history" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">2005</div>
                        <div class="timeline-content">
                            <h3>ورود وینستون به بازار ایران</h3>
                            <p>وینستون به صورت رسمی وارد بازار ایران شد و مورد استقبال مصرف‌کنندگان ایرانی قرار گرفت.</p>
                            <a href="https://www.jti.com/markets" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">2010</div>
                        <div class="timeline-content">
                            <h3>معرفی انواع جدید در ایران</h3>
                            <p>انواع مختلف وینستون شامل Red، Blue و Silver در بازار ایران عرضه شد.</p>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">2015</div>
                        <div class="timeline-content">
                            <h3>توسعه شبکه توزیع</h3>
                            <p>شبکه توزیع وینستون در سراسر ایران گسترش یافت و دسترسی بهتری برای مصرف‌کنندگان فراهم شد.</p>
                            <a href="https://www.jti.com/markets" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">2020</div>
                        <div class="timeline-content">
                            <h3>نوآوری در بسته‌بندی</h3>
                            <p>بسته‌بندی جدید وینستون با تکنولوژی‌های مدرن و طراحی بهبود یافته معرفی شد.</p>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-year">2025</div>
                        <div class="timeline-content">
                            <h3>آینده وینستون</h3>
                            <p>برنامه‌ریزی برای معرفی محصولات جدید و توسعه بیشتر در بازارهای نوظهور از جمله ایران.</p>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">منبع: JTI.com</a>
                        </div>
                    </div>
                </div>

                <h2>محصولات فعلی وینستون</h2>
                <div class="product-grid">
                    <div class="product-card">
                        <div class="product-header">
                            <h3>Winston Red</h3>
                            <p>کلاسیک و قوی</p>
                        </div>
                        <div class="product-body">
                            <p>محصول کلاسیک وینستون با طعم قوی و اصیل</p>
                            <ul class="product-specs">
                                <li><strong>نیکوتین:</strong> 0.8 میلی‌گرم</li>
                                <li><strong>قطران:</strong> 10 میلی‌گرم</li>
                                <li><strong>تعداد:</strong> 20 عدد</li>
                                <li><strong>فیلتر:</strong> استاندارد</li>
                            </ul>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">اطلاعات بیشتر</a>
                        </div>
                    </div>
                    
                    <div class="product-card">
                        <div class="product-header">
                            <h3>Winston Blue</h3>
                            <p>ملایم و متعادل</p>
                        </div>
                        <div class="product-body">
                            <p>نسخه ملایم‌تر وینستون برای طعم متعادل</p>
                            <ul class="product-specs">
                                <li><strong>نیکوتین:</strong> 0.6 میلی‌گرم</li>
                                <li><strong>قطران:</strong> 7 میلی‌گرم</li>
                                <li><strong>تعداد:</strong> 20 عدد</li>
                                <li><strong>فیلتر:</strong> پیشرفته</li>
                            </ul>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">اطلاعات بیشتر</a>
                        </div>
                    </div>
                    
                    <div class="product-card">
                        <div class="product-header">
                            <h3>Winston Silver</h3>
                            <p>فوق‌العاده ملایم</p>
                        </div>
                        <div class="product-body">
                            <p>ملایم‌ترین نسخه وینستون با طعم نرم</p>
                            <ul class="product-specs">
                                <li><strong>نیکوتین:</strong> 0.4 میلی‌گرم</li>
                                <li><strong>قطران:</strong> 4 میلی‌گرم</li>
                                <li><strong>تعداد:</strong> 20 عدد</li>
                                <li><strong>فیلتر:</strong> فوق پیشرفته</li>
                            </ul>
                            <a href="https://www.jti.com/about-jti/our-brands/winston" class="source-link" target="_blank">اطلاعات بیشتر</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Us Section -->
        <div id="about-section" class="section hidden">
            <div class="content-area">
                <h2 id="aboutPageTitle">درباره خانواده وینستون ایران</h2>
                
                <div class="about-grid">
                    <div class="about-card">
                        <div class="about-icon">🎯</div>
                        <h3>ماموریت ما</h3>
                        <p>ارائه جامع‌ترین و به‌روزترین اطلاعات درباره محصولات وینستون و صنعت تنباکو در ایران. ما متعهد به ارائه اطلاعات دقیق و معتبر از منابع رسمی هستیم.</p>
                    </div>
                    
                    <div class="about-card">
                        <div class="about-icon">👁️</div>
                        <h3>چشم‌انداز ما</h3>
                        <p>تبدیل شدن به مرجع اصلی و معتبر اطلاعات محصولات وینستون در ایران و منطقه، با ارائه خدمات به‌روزرسانی هر ساعت و پوشش کامل اخبار صنعت.</p>
                    </div>
                    
                    <div class="about-card">
                        <div class="about-icon">⚡</div>
                        <h3>تکنولوژی پیشرفته</h3>
                        <p>استفاده از ربات‌های هوشمند برای جمع‌آوری اخبار و آگهی‌ها از بیش از 14 منبع معتبر داخلی و خارجی با به‌روزرسانی هر ساعت.</p>
                    </div>
                    
                    <div class="about-card">
                        <div class="about-icon">🤝</div>
                        <h3>تیم ما</h3>
                        <p>تیمی متشکل از متخصصان صنعت تنباکو، توسعه‌دهندگان نرم‌افزار و تحلیلگران بازار که با تجربه بالا در خدمت شما هستند.</p>
                    </div>
                    
                    <div class="about-card">
                        <div class="about-icon">🔍</div>
                        <h3>دقت و اعتبار</h3>
                        <p>تمام اطلاعات ما از منابع معتبر مانند JTI.com، Wikipedia و سایت‌های رسمی شرکت‌ها جمع‌آوری می‌شود و لینک منبع اصلی همراه هر مطلب قرار می‌گیرد.</p>
                    </div>
                    
                    <div class="about-card">
                        <div class="about-icon">📈</div>
                        <h3>آمار عملکرد</h3>
                        <p>بیش از 1000 خبر و آگهی جمع‌آوری شده، پوشش 14 منبع مختلف، به‌روزرسانی هر ساعت و خدمات‌رسانی 24 ساعته.</p>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h3>تعهد ما به کیفیت</h3>
                    <p>خانواده وینستون ایران متعهد است تا:</p>
                    <ul style="margin: 15px 0; padding-right: 20px;">
                        <li>اطلاعات را هر ساعت به‌روزرسانی کند</li>
                        <li>منابع معتبر و رسمی استفاده کند</li>
                        <li>لینک منبع اصلی را همراه هر مطلب قرار دهد</li>
                        <li>پاسخگوی سوالات کاربران باشد</li>
                        <li>حریم خصوصی کاربران را محترم بشمارد</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Contact Us Section -->
        <div id="contact-section" class="section hidden">
            <div class="content-area">
                <h2 id="contactPageTitle">تماس با ما</h2>
                <p id="contactPageDesc">برای ارتباط با تیم خانواده وینستون ایران از راه‌های زیر استفاده کنید</p>
                
                <div class="contact-grid">
                    <div class="contact-card">
                        <div class="contact-icon">📱</div>
                        <h3>واتساپ</h3>
                        <p>برای تماس سریع و دریافت پاسخ فوری</p>
                        <a href="https://wa.me/989354052684?text=سلام، من از وب‌سایت خانواده وینستون ایران آمده‌ام" class="whatsapp-btn" target="_blank">
                            📱 +98 935 405 2684
                        </a>
                    </div>
                    
                    <div class="contact-card">
                        <div class="contact-icon">☎️</div>
                        <h3>تماس تلفنی</h3>
                        <p>پشتیبانی تلفنی در ساعات اداری</p>
                        <a href="tel:+989354052684" style="color: #e67e22; font-weight: bold; font-size: 18px;">
                            +98 935 405 2684
                        </a>
                        <p><small>شنبه تا چهارشنبه: 9:00 - 17:00</small></p>
                    </div>
                    
                    <div class="contact-card">
                        <div class="contact-icon">📧</div>
                        <h3>ایمیل</h3>
                        <p>برای سوالات تخصصی و پیشنهادات</p>
                        <a href="mailto:info@winstonfamily.ir" style="color: #e67e22; font-weight: bold;">
                            info@winstonfamily.ir
                        </a>
                    </div>
                    
                    <div class="contact-card">
                        <div class="contact-icon">🌐</div>
                        <h3>شبکه‌های اجتماعی</h3>
                        <p>ما را در شبکه‌های اجتماعی دنبال کنید</p>
                        <div style="margin: 10px 0;">
                            <a href="https://instagram.com/winstonfamilyiran" target="_blank" style="margin: 5px; color: #e67e22;">📷 Instagram</a><br>
                            <a href="https://t.me/winstonfamilyiran" target="_blank" style="margin: 5px; color: #e67e22;">📱 Telegram</a><br>
                            <a href="https://youtube.com/winstonfamilyiran" target="_blank" style="margin: 5px; color: #e67e22;">📺 YouTube</a>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin: 20px 0;">
                    <h3>فرم تماس سریع</h3>
                    <form onsubmit="sendWhatsAppMessage(event)">
                        <div class="form-group">
                            <label>نام و نام خانوادگی:</label>
                            <input type="text" id="contactName" required>
                        </div>
                        <div class="form-group">
                            <label>موضوع:</label>
                            <select id="contactSubject" required>
                                <option value="">انتخاب کنید</option>
                                <option value="سوال عمومی">سوال عمومی</option>
                                <option value="اطلاعات محصول">اطلاعات محصول</option>
                                <option value="گزارش مشکل">گزارش مشکل</option>
                                <option value="پیشنهاد">پیشنهاد</option>
                                <option value="همکاری">همکاری</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>پیام:</label>
                            <textarea id="contactMessage" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">ارسال از طریق واتساپ</button>
                    </form>
                </div>

                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; border-right: 4px solid #27ae60;">
                    <h4>⏰ ساعات پاسخگویی</h4>
                    <p><strong>واتساپ:</strong> 24 ساعته (پاسخ سریع در ساعات اداری)</p>
                    <p><strong>تلفن:</strong> شنبه تا چهارشنبه، 9:00 تا 17:00</p>
                    <p><strong>ایمیل:</strong> پاسخ حداکثر تا 24 ساعت</p>
                </div>
            </div>
        </div>

        <!-- Admin Login Section -->
        <div id="admin-login-section" class="section hidden">
            <div class="login-container">
                <div class="login-form">
                    <div class="login-logo">🔐</div>
                    <h2 class="login-title">پنل کنترل مدیریت</h2>
                    <div id="adminErrorMessage" class="error-message">
                        نام کاربری یا رمز عبور اشتباه است
                    </div>
                    <form onsubmit="adminLogin(event)">
                        <div class="form-group">
                            <label>نام کاربری:</label>
                            <input type="text" id="adminUsername" required autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label>رمز عبور:</label>
                            <input type="password" id="adminPassword" required autocomplete="current-password">
                        </div>
                        <button type="submit" class="login-btn">
                            ورود به پنل مدیریت
                        </button>
                    </form>
                    <div style="margin-top: 20px; font-size: 12px; color: #7f8c8d;">
                        <p>🔒 ورود محدود به مدیران سیستم</p>
                        <p><strong>نام کاربری:</strong> Winston2025</p>
                        <p><strong>رمز عبور:</strong> Winston@2025</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Panel Section -->
        <div id="admin-panel-section" class="section hidden">
            <div class="admin-panel">
                <div class="admin-header">
                    <div>
                        <div class="admin-title">پنل کنترل سیستم</div>
                        <div style="font-size: 14px; opacity: 0.9;">مدیریت ربات‌ها و محتوا - به‌روزرسانی هر ساعت</div>
                    </div>
                    <button class="logout-btn" onclick="adminLogout()">
                        خروج 🚪
                    </button>
                </div>

                <div class="admin-content">
                    <!-- Statistics Overview -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-number" id="adminNewsCount">0</span>
                            <span class="stat-label">کل اخبار جمع‌آوری شده</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="adminAdsCount">0</span>
                            <span class="stat-label">کل آگهی‌های فعال</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">14</span>
                            <span class="stat-label">منابع مختلف</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number">1</span>
                            <span class="stat-label">ساعت به‌روزرسانی</span>
                        </div>
                    </div>

                    <!-- Admin Tabs -->
                    <div class="admin-tabs">
                        <button class="admin-tab active" onclick="showAdminTab('credentials')">🔐 تغییر رمز</button>
                        <button class="admin-tab" onclick="showAdminTab('content')">📝 مدیریت محتوا</button>
                        <button class="admin-tab" onclick="showAdminTab('settings')">⚙️ تنظیمات</button>
                        <button class="admin-tab" onclick="showAdminTab('bots')">🤖 مدیریت ربات‌ها</button>
                    </div>

                    <!-- Credentials Tab -->
                    <div id="admin-tab-credentials" class="tab-content active">
                        <h3>تغییر نام کاربری و رمز عبور</h3>
                        <div id="credentialsSuccessMessage" class="success-message">
                            اطلاعات ورود با موفقیت تغییر یافت!
                        </div>
                        <form onsubmit="updateCredentials(event)">
                            <div class="form-group">
                                <label>نام کاربری جدید:</label>
                                <input type="text" id="newUsername" required>
                            </div>
                            <div class="form-group">
                                <label>رمز عبور جدید:</label>
                                <input type="password" id="newPassword" required>
                            </div>
                            <div class="form-group">
                                <label>تکرار رمز عبور:</label>
                                <input type="password" id="confirmPassword" required>
                            </div>
                            <button type="submit" class="btn btn-primary">💾 ذخیره تغییرات</button>
                        </form>
                    </div>

                    <!-- Content Management Tab -->
                    <div id="admin-tab-content" class="tab-content">
                        <h3>مدیریت محتوا</h3>
                        <div id="contentSuccessMessage" class="success-message">
                            محتوا با موفقیت اضافه شد!
                        </div>
                        
                        <div class="form-group">
                            <label>📝 عنوان مطلب:</label>
                            <input type="text" id="contentTitle" placeholder="عنوان مطلب را وارد کنید">
                        </div>
                        
                        <div class="form-group">
                            <label>📄 محتوا:</label>
                            <textarea id="contentBody" rows="8" placeholder="محتوای کامل مطلب را وارد کنید"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>🔗 لینک منبع:</label>
                            <input type="url" id="contentSource" placeholder="https://example.com">
                        </div>
                        
                        <div class="form-group">
                            <label>📂 نوع محتوا:</label>
                            <select id="contentType">
                                <option value="news">📰 خبر</option>
                                <option value="ad">📢 آگهی</option>
                                <option value="product">📦 محصول</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>💰 قیمت (فقط برای آگهی‌ها):</label>
                            <input type="text" id="contentPrice" placeholder="مثال: 250,000 تومان">
                        </div>
                        
                        <button class="btn btn-primary" onclick="addContent()">➕ افزودن محتوا</button>
                        <button class="btn btn-success" onclick="clearContentForm()">🗑️ پاک کردن فرم</button>
                    </div>

                    <!-- Settings Tab -->
                    <div id="admin-tab-settings" class="tab-content">
                        <h3>تنظیمات سیستم</h3>
                        <div id="settingsSuccessMessage" class="success-message">
                            تنظیمات با موفقیت ذخیره شد!
                        </div>
                        
                        <div class="form-group">
                            <label>⏰ فاصله به‌روزرسانی (ساعت):</label>
                            <input type="number" id="updateInterval" value="1" min="1" max="24">
                            <small style="color: #7f8c8d;">فعلاً: هر ساعت یکبار</small>
                        </div>
                        
                        <div class="form-group">
                            <label>📊 حداکثر تعداد اخبار:</label>
                            <input type="number" id="maxNews" value="200" min="10" max="1000">
                        </div>
                        
                        <div class="form-group">
                            <label>📢 حداکثر تعداد آگهی‌ها:</label>
                            <input type="number" id="maxAds" value="100" min="10" max="500">
                        </div>
                        
                        <div class="form-group">
                            <label>🌐 زبان پیش‌فرض:</label>
                            <select id="defaultLanguage">
                                <option value="fa">🇮🇷 فارسی</option>
                                <option value="en">🇺🇸 English</option>
                                <option value="ar">🇸🇦 العربية</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>📧 ایمیل مدیر سیستم:</label>
                            <input type="email" id="adminEmail" value="admin@winstonfamily.ir">
                        </div>
                        
                        <div class="form-group">
                            <label>📱 شماره واتساپ پشتیبانی:</label>
                            <input type="text" id="supportWhatsApp" value="+98 935 405 2684">
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveAdminSettings()">💾 ذخیره تنظیمات</button>
                        <button class="btn btn-danger" onclick="resetSettings()">🔄 بازنشانی به پیش‌فرض</button>
                    </div>

                    <!-- Bots Management Tab -->
                    <div id="admin-tab-bots" class="tab-content">
                        <h3>مدیریت ربات‌های جمع‌آوری</h3>
                        <p>کنترل و نظارت بر ربات‌های جمع‌آوری اخبار و آگهی‌ها</p>
                        
                        <div class="bot-status">
                            <div class="bot-card" id="adminNewsBot">
                                <h4>🗞️ ربات جمع‌آوری اخبار <span class="status-indicator"></span></h4>
                                <p><strong>وضعیت:</strong> <span id="adminNewsBotStatus">فعال</span></p>
                                <p><strong>آخرین اجرا:</strong> <span id="adminNewsBotLastRun">در حال بارگذاری...</span></p>
                                <p><strong>اجرای بعدی:</strong> <span id="adminNewsBotNext">در حال محاسبه...</span></p>
                                <p><strong>منابع:</strong> JTI.com, BAT.com, PMI.com, Tobacco.com, CigTehran.shop, KT&G.com, Wikipedia, TobaccoReporter.com</p>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-success" onclick="startNewsBot()">▶️ شروع</button>
                                    <button class="btn btn-danger" onclick="stopNewsBot()">⏹️ توقف</button>
                                    <button class="btn btn-primary" onclick="runNewsBot()">🔄 اجرای فوری</button>
                                </div>
                            </div>
                            
                            <div class="bot-card" id="adminAdsBot">
                                <h4>📢 ربات جمع‌آوری آگهی‌ها <span class="status-indicator"></span></h4>
                                <p><strong>وضعیت:</strong> <span id="adminAdsBotStatus">فعال</span></p>
                                <p><strong>آخرین اجرا:</strong> <span id="adminAdsBotLastRun">در حال بارگذاری...</span></p>
                                <p><strong>اجرای بعدی:</strong> <span id="adminAdsBotNext">در حال محاسبه...</span></p>
                                <p><strong>منابع:</strong> دیوار، شیپور، ایمالز، علی‌بابا، آمازون، eBay</p>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-success" onclick="startAdsBot()">▶️ شروع</button>
                                    <button class="btn btn-danger" onclick="stopAdsBot()">⏹️ توقف</button>
                                    <button class="btn btn-primary" onclick="runAdsBot()">🔄 اجرای فوری</button>
                                </div>
                            </div>
                        </div>

                        <h4>⚙️ تنظیمات منابع اخبار</h4>
                        <div class="form-group">
                            <label>منابع اخبار (یک URL در هر خط):</label>
                            <textarea id="newsSources" rows="8" placeholder="https://www.jti.com/news">https://www.jti.com/about-jti/news-views
https://www.bat.com/group/sites/UK__9D9KCY.nsf/vwPagesWebLive/DOAWWGBP
https://www.pmi.com/media-center/news
https://www.tobacco.org/news
https://www.reuters.com/business/retail-consumer/tobacco
https://www.ktng.com/en/company/news.do
https://en.wikipedia.org/wiki/Winston_(cigarette)
https://tobaccoreporter.com/category/news</textarea>
                        </div>

                        <h4>⚙️ تنظیمات منابع آگهی‌ها</h4>
                        <div class="form-group">
                            <label>منابع آگهی‌ها (یک URL در هر خط):</label>
                            <textarea id="adsSources" rows="6" placeholder="https://divar.ir/s/tehran/cigarette">https://divar.ir/s/tehran
https://sheypoor.com
https://emalls.ir
https://alibaba.ir
https://www.amazon.com
https://www.ebay.com</textarea>
                        </div>

                        <button class="btn btn-primary" onclick="saveSourceSettings()">💾 ذخیره تنظیمات منابع</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let newsData = [];
        let adsData = [];
        let currentLanguage = 'fa';
        let botIntervals = {};
        let adminCredentials = {
            username: 'Winston2025',
            password: 'Winston@2025'
        };
        let isAdminLoggedIn = false;
        let systemLogs = [];

        // Language translations
        const translations = {
            fa: {
                title: 'خانواده وینستون ایران',
                nav: {
                    home: 'خانه',
                    news: 'اخبار',
                    ads: 'آگهی‌ها',
                    products: 'محصولات',
                    about: 'درباره ما',
                    contact: 'تماس با ما',
                    admin: '🔐 مدیریت'
                },
                welcome: 'خوش آمدید به خانواده وینستون ایران',
                description: 'مرجع تخصصی محصولات دخانی وینستون در ایران. ما جدیدترین اخبار و محصولات صنعت تنباکو را هر ساعت برای شما به‌روزرسانی می‌کنیم.',
                stats: {
                    news: 'اخبار جمع‌آوری شده',
                    ads: 'آگهی‌های فعال',
                    sources: 'منابع مختلف',
                    update: 'ساعت به‌روزرسانی'
                },
                pages: {
                    news: {
                        title: 'اخبار صنعت تنباکو',
                        desc: 'اخبار به‌روزرسانی هر ساعت از منابع معتبر جهانی'
                    },
                    ads: {
                        title: 'آگهی‌های خرید و فروش',
                        desc: 'آگهی‌های به‌روزرسانی هر ساعت از سایت‌های مختلف'
                    },
                    products: {
                        title: 'تاریخچه محصولات وینستون',
                        desc: 'سیر تاریخی تحولات وینستون از ابتدای تشکیل تا سال 2025'
                    },
                    about: {
                        title: 'درباره خانواده وینستون ایران'
                    },
                    contact: {
                        title: 'تماس با ما',
                        desc: 'برای ارتباط با تیم خانواده وینستون ایران از راه‌های زیر استفاده کنید'
                    }
                },
                bots: {
                    news: 'ربات جمع‌آوری اخبار',
                    ads: 'ربات جمع‌آوری آگهی‌ها',
                    sources: 'منابع:'
                },
                latest: 'آخرین اخبار'
            },
            en: {
                title: 'Winston Family Iran',
                nav: {
                    home: 'Home',
                    news: 'News',
                    ads: 'Ads',
                    products: 'Products',
                    about: 'About Us',
                    contact: 'Contact',
                    admin: '🔐 Admin'
                },
                welcome: 'Welcome to Winston Family Iran',
                description: 'The specialized reference for Winston tobacco products in Iran. We update the latest news and tobacco industry products for you every hour.',
                stats: {
                    news: 'Collected News',
                    ads: 'Active Ads',
                    sources: 'Different Sources',
                    update: 'Hour Updates'
                },
                pages: {
                    news: {
                        title: 'Tobacco Industry News',
                        desc: 'Hourly updated news from reliable global sources'
                    },
                    ads: {
                        title: 'Buy & Sell Advertisements',
                        desc: 'Hourly updated ads from various websites'
                    },
                    products: {
                        title: 'Winston Products History',
                        desc: 'Historical evolution of Winston from inception to 2025'
                    },
                    about: {
                        title: 'About Winston Family Iran'
                    },
                    contact: {
                        title: 'Contact Us',
                        desc: 'Use the following methods to contact Winston Family Iran team'
                    }
                },
                bots: {
                    news: 'News Collection Bot',
                    ads: 'Ads Collection Bot',
                    sources: 'Sources:'
                },
                latest: 'Latest News'
            },
            ar: {
                title: 'عائلة وينستون إيران',
                nav: {
                    home: 'الرئيسية',
                    news: 'الأخبار',
                    ads: 'الإعلانات',
                    products: 'المنتجات',
                    about: 'من نحن',
                    contact: 'اتصل بنا',
                    admin: '🔐 الإدارة'
                },
                welcome: 'مرحباً بكم في عائلة وينستون إيران',
                description: 'المرجع المتخصص لمنتجات التبغ وينستون في إيران. نقوم بتحديث أحدث الأخبار ومنتجات صناعة التبغ لكم كل ساعة.',
                stats: {
                    news: 'الأخبار المجمعة',
                    ads: 'الإعلانات النشطة',
                    sources: 'مصادر مختلفة',
                    update: 'تحديث كل ساعة'
                },
                pages: {
                    news: {
                        title: 'أخبار صناعة التبغ',
                        desc: 'أخبار محدثة كل ساعة من مصادر عالمية موثوقة'
                    },
                    ads: {
                        title: 'إعلانات البيع والشراء',
                        desc: 'إعلانات محدثة كل ساعة من مواقع مختلفة'
                    },
                    products: {
                        title: 'تاريخ منتجات وينستون',
                        desc: 'التطور التاريخي لوينستون من البداية حتى 2025'
                    },
                    about: {
                        title: 'حول عائلة وينستون إيران'
                    },
                    contact: {
                        title: 'اتصل بنا',
                        desc: 'استخدم الطرق التالية للتواصل مع فريق عائلة وينستون إيران'
                    }
                },
                bots: {
                    news: 'روبوت جمع الأخبار',
                    ads: 'روبوت جمع الإعلانات',
                    sources: 'المصادر:'
                },
                latest: 'آخر الأخبار'
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Winston Family Iran - System Initialized');
            initializeApp();
            startAutomaticBots();
            loadInitialData();
            checkAdminStatus();
        });

        function initializeApp() {
            updateStats();
            updateLanguage();
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.add('hidden'));
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            
            // Update active nav item
            const navItems = document.querySelectorAll('.nav-menu a');
            navItems.forEach(item => item.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // Language switching - Three languages with proper RTL/LTR support
        function toggleLanguage() {
            if (currentLanguage === 'fa') {
                currentLanguage = 'en';
            } else if (currentLanguage === 'en') {
                currentLanguage = 'ar';
            } else {
                currentLanguage = 'fa';
            }
            updateLanguage();
        }

        function updateLanguage() {
            const langText = document.getElementById('langText');
            const body = document.body;
            const html = document.documentElement;
            
            // Update language button and direction
            if (currentLanguage === 'fa') {
                langText.innerHTML = '🇺🇸 EN | 🇸🇦 عربی';
                body.style.direction = 'rtl';
                html.setAttribute('lang', 'fa');
                html.setAttribute('dir', 'rtl');
            } else if (currentLanguage === 'en') {
                langText.innerHTML = '🇮🇷 فا | 🇸🇦 عربی';
                body.style.direction = 'ltr';
                html.setAttribute('lang', 'en');
                html.setAttribute('dir', 'ltr');
            } else {
                langText.innerHTML = '🇮🇷 فا | 🇺🇸 EN';
                body.style.direction = 'rtl';
                html.setAttribute('lang', 'ar');
                html.setAttribute('dir', 'rtl');
            }
            
            // Update page content
            const t = translations[currentLanguage];
            
            // Update main elements
            document.getElementById('mainLogo').textContent = t.title;
            document.getElementById('welcomeTitle').textContent = t.welcome;
            document.getElementById('welcomeDesc').textContent = t.description;
            
            // Update navigation
            document.getElementById('nav-home').textContent = t.nav.home;
            document.getElementById('nav-news').textContent = t.nav.news;
            document.getElementById('nav-ads').textContent = t.nav.ads;
            document.getElementById('nav-products').textContent = t.nav.products;
            document.getElementById('nav-about').textContent = t.nav.about;
            document.getElementById('nav-contact').textContent = t.nav.contact;
            document.getElementById('adminLink').textContent = isAdminLoggedIn ? '⚙️ ' + t.nav.admin.replace('🔐 ', '') : t.nav.admin;
            
            // Update stats labels
            document.getElementById('newsLabel').textContent = t.stats.news;
            document.getElementById('adsLabel').textContent = t.stats.ads;
            document.getElementById('sourcesLabel').textContent = t.stats.sources;
            document.getElementById('updateLabel').textContent = t.stats.update;
            
            // Update bot status
            document.getElementById('newsBotTitle').innerHTML = `🗞️ ${t.bots.news} <span class="status-indicator"></span>`;
            document.getElementById('adsBotTitle').innerHTML = `📢 ${t.bots.ads} <span class="status-indicator"></span>`;
            
            // Update page titles
            document.getElementById('latestNewsTitle').textContent = t.latest;
            document.getElementById('newsPageTitle').textContent = t.pages.news.title;
            document.getElementById('newsPageDesc').textContent = t.pages.news.desc;
            document.getElementById('adsPageTitle').textContent = t.pages.ads.title;
            document.getElementById('adsPageDesc').textContent = t.pages.ads.desc;
            document.getElementById('productsPageTitle').textContent = t.pages.products.title;
            document.getElementById('productsPageDesc').textContent = t.pages.products.desc;
            document.getElementById('aboutPageTitle').textContent = t.pages.about.title;
            document.getElementById('contactPageTitle').textContent = t.pages.contact.title;
            document.getElementById('contactPageDesc').textContent = t.pages.contact.desc;
        }

        // Bot management functions - Enhanced with working URLs
        function startAutomaticBots() {
            // Start news collection bot (every hour)
            botIntervals.news = setInterval(() => {
                collectNews();
            }, 60 * 60 * 1000); // 1 hour

            // Start ads collection bot (every hour)
            botIntervals.ads = setInterval(() => {
                collectAds();
            }, 60 * 60 * 1000); // 1 hour

            // Initial collection
            setTimeout(() => collectNews(), 1000);
            setTimeout(() => collectAds(), 3000);
        }

        function collectNews() {
            console.log('News collection bot started...');
            addLog('شروع جمع‌آوری اخبار از منابع مختلف...');
            
            // Enhanced news sources with working links
            const sources = [
                { name: 'JTI', url: 'https://www.jti.com/about-jti/news-views' },
                { name: 'BAT', url: 'https://www.bat.com/group/sites/UK__9D9KCY.nsf/vwPagesWebLive/DOAWWGBP' },
                { name: 'PMI', url: 'https://www.pmi.com/media-center/news' },
                { name: 'Tobacco.org', url: 'https://www.tobacco.org/news' },
                { name: 'Reuters Tobacco', url: 'https://www.reuters.com/business/retail-consumer/tobacco' },
                { name: 'KT&G', url: 'https://www.ktng.com/en/company/news.do' },
                { name: 'Wikipedia Winston', url: 'https://en.wikipedia.org/wiki/Winston_(cigarette)' },
                { name: 'Tobacco Reporter', url: 'https://tobaccoreporter.com/category/news' }
            ];

            sources.forEach((source, index) => {
                setTimeout(() => {
                    const newsItem = generateSampleNews(source);
                    newsData.push(newsItem);
                    addLog(`خبر جدید از ${source.name} جمع‌آوری شد`);
                    
                    if (index === sources.length - 1) {
                        updateNewsDisplay();
                        updateStats();
                        const now = new Date().toLocaleString('fa-IR');
                        document.getElementById('newsLastUpdate').textContent = now;
                        if (document.getElementById('adminNewsBotLastRun')) {
                            document.getElementById('adminNewsBotLastRun').textContent = now;
                        }
                    }
                }, index * 500);
            });
        }

        function collectAds() {
            console.log('Ads collection bot started...');
            addLog('شروع جمع‌آوری آگهی‌ها از منابع مختلف...');
            
            // Enhanced ads sources with working links
            const sources = [
                { name: 'دیوار', url: 'https://divar.ir/s/tehran' },
                { name: 'شیپور', url: 'https://sheypoor.com' },
                { name: 'ایمالز', url: 'https://emalls.ir' },
                { name: 'علی‌بابا', url: 'https://alibaba.ir' },
                { name: 'آمازون', url: 'https://www.amazon.com' },
                { name: 'eBay', url: 'https://www.ebay.com' }
            ];

            sources.forEach((source, index) => {
                setTimeout(() => {
                    const adItem = generateSampleAd(source);
                    adsData.push(adItem);
                    addLog(`آگهی جدید از ${source.name} جمع‌آوری شد`);
                    
                    if (index === sources.length - 1) {
                        updateAdsDisplay();
                        updateStats();
                        const now = new Date().toLocaleString('fa-IR');
                        document.getElementById('adsLastUpdate').textContent = now;
                        if (document.getElementById('adminAdsBotLastRun')) {
                            document.getElementById('adminAdsBotLastRun').textContent = now;
                        }
                    }
                }, index * 500);
            });
        }

        function generateSampleNews(source) {
            const titles = [
                'جدیدترین محصولات تنباکو در بازار جهانی معرفی شد',
                'تغییرات قوانین صنعت دخانیات در سال 2025 اعلام شد',
                'نوآوری‌های تکنولوژیکی در تولید سیگار به کار گرفته شد',
                'گزارش فروش ماهانه محصولات وینستون منتشر شد',
                'همکاری‌های جدید در صنعت تنباکو آغاز شد',
                'تحولات بازار دخانیات در خاورمیانه بررسی شد',
                'استراتژی‌های جدید JTI برای سال آینده اعلام شد',
                'تأثیر تکنولوژی بر صنعت تنباکو مطالعه شد',
                'بررسی کیفیت محصولات وینستون در آزمایشگاه‌های معتبر',
                'آمار جدید مصرف محصولات تنباکو در ایران منتشر شد'
            ];

            const contents = [
                'این خبر شامل جزئیات مهم درباره تحولات اخیر در صنعت تنباکو و تأثیر آن بر بازار محصولات وینستون می‌باشد. منابع معتبر این اطلاعات را تأیید کرده‌اند.',
                'بر اساس گزارش‌های رسمی، تغییرات جدیدی در استراتژی‌های بازاریابی و توزیع محصولات در نظر گرفته شده است که تأثیر مثبتی بر مصرف‌کنندگان خواهد داشت.',
                'کارشناسان صنعت معتقدند که این تحولات می‌تواند نقش مهمی در بهبود کیفیت محصولات و رضایت مشتریان ایفا کند.',
                'این گزارش حاوی آمار دقیق و تحلیل‌های جامع از وضعیت فعلی بازار و پیش‌بینی‌های آینده است که برای علاقه‌مندان بسیار مفید خواهد بود.'
            ];

            return {
                id: Date.now() + Math.random(),
                title: titles[Math.floor(Math.random() * titles.length)],
                content: contents[Math.floor(Math.random() * contents.length)],
                source: source.name,
                url: source.url,
                date: new Date().toISOString(),
                category: 'اخبار'
            };
        }

        function generateSampleAd(source) {
            const titles = [
                'فروش سیگار وینستون اصل و معتبر با ضمانت کیفیت',
                'خرید عمده محصولات تنباکو با تخفیف ویژه',
                'سیگار وارداتی با قیمت مناسب و کیفیت بالا',
                'فروش ویژه محصولات دخانی برندهای معتبر',
                'خرید و فروش تنباکو طبیعی و ارگانیک',
                'سیگار وینستون Red, Blue, Silver موجود در انبار',
                'فروش فوری محصولات دخانی با ضمانت اصالت',
                'تخفیف ویژه برای خرید عمده محصولات وینستون',
                'فروش محصولات تنباکو با مجوزهای معتبر',
                'خرید آنلاین سیگار با تحویل سریع'
            ];

            const prices = ['150,000', '200,000', '300,000', '450,000', '500,000', '750,000', '850,000', '1,200,000'];

            const contents = [
                'توضیحات کامل آگهی شامل جزئیات محصول، شرایط فروش، ضمانت کیفیت و امکان تحویل در سراسر کشور. تمام محصولات دارای مجوزهای لازم هستند.',
                'این آگهی شامل محصولات اصل و معتبر با بهترین قیمت‌ها می‌باشد. امکان بازدید حضوری و خرید آنلاین فراهم است.',
                'فروشنده معتبر با سابقه درخشان در ارائه محصولات باکیفیت. ضمانت اصالت و کیفیت محصولات ارائه می‌شود.',
                'شرایط پرداخت متنوع و امکان تحویل در کمترین زمان ممکن. پشتیبانی 24 ساعته برای مشتریان عزیز.'
            ];

            return {
                id: Date.now() + Math.random(),
                title: titles[Math.floor(Math.random() * titles.length)],
                content: contents[Math.floor(Math.random() * contents.length)],
                source: source.name,
                url: source.url,
                price: prices[Math.floor(Math.random() * prices.length)] + ' تومان',
                date: new Date().toISOString(),
                category: 'آگهی'
            };
        }

        function updateNewsDisplay() {
            const newsGrid = document.getElementById('newsGrid');
            const latestNews = document.getElementById('latestNews');
            
            if (newsGrid) {
                newsGrid.innerHTML = '';
                newsData.slice(-20).reverse().forEach(news => {
                    const newsElement = createNewsElement(news);
                    newsGrid.appendChild(newsElement);
                });
            }

            if (latestNews) {
                latestNews.innerHTML = '';
                newsData.slice(-5).reverse().forEach(news => {
                    const newsElement = createLatestNewsElement(news);
                    latestNews.appendChild(newsElement);
                });
            }
        }

        function updateAdsDisplay() {
            const adsGrid = document.getElementById('adsGrid');
            if (adsGrid) {
                adsGrid.innerHTML = '';
                adsData.slice(-20).reverse().forEach(ad => {
                    const adElement = createAdElement(ad);
                    adsGrid.appendChild(adElement);
                });
            }
        }

        function createNewsElement(news) {
            const div = document.createElement('div');
            div.className = 'news-item';
            div.innerHTML = `
                <h3>${news.title}</h3>
                <div class="news-meta">
                    منبع: ${news.source} | تاریخ: ${new Date(news.date).toLocaleDateString('fa-IR')}
                </div>
                <div class="news-content">${news.content}</div>
                <a href="${news.url}" class="source-link" target="_blank">مشاهده منبع اصلی</a>
            `;
            return div;
        }

        function createLatestNewsElement(news) {
            const div = document.createElement('div');
            div.style.cssText = 'padding: 10px; border-bottom: 1px solid #eee; margin-bottom: 10px;';
            div.innerHTML = `
                <h4 style="font-size: 14px; margin-bottom: 5px;">${news.title}</h4>
                <small style="color: #666;">${news.source} - ${new Date(news.date).toLocaleDateString('fa-IR')}</small>
                <br><a href="${news.url}" target="_blank" style="font-size: 12px; color: #3498db;">منبع اصلی</a>
            `;
            return div;
        }

        function createAdElement(ad) {
            const div = document.createElement('div');
            div.className = 'ad-item';
            div.innerHTML = `
                <h3>${ad.title}</h3>
                <div class="ad-meta">
                    منبع: ${ad.source} | قیمت: ${ad.price} | تاریخ: ${new Date(ad.date).toLocaleDateString('fa-IR')}
                </div>
                <div class="ad-content">${ad.content}</div>
                <a href="${ad.url}" class="source-link" target="_blank">مشاهده منبع اصلی</a>
            `;
            return div;
        }

        function updateStats() {
            document.getElementById('newsCount').textContent = newsData.length;
            document.getElementById('adsCount').textContent = adsData.length;
            
            // Update admin stats if visible
            const adminNewsCount = document.getElementById('adminNewsCount');
            const adminAdsCount = document.getElementById('adminAdsCount');
            if (adminNewsCount) adminNewsCount.textContent = newsData.length;
            if (adminAdsCount) adminAdsCount.textContent = adsData.length;
        }

        // Contact form function
        function sendWhatsAppMessage(event) {
            event.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const subject = document.getElementById('contactSubject').value;
            const message = document.getElementById('contactMessage').value;
            
            const whatsappMessage = `سلام، من ${name} هستم.
موضوع: ${subject}
پیام: ${message}

از وب‌سایت خانواده وینستون ایران`;
            
            const whatsappUrl = `https://wa.me/989354052684?text=${encodeURIComponent(whatsappMessage)}`;
            window.open(whatsappUrl, '_blank');
            
            // Clear form
            document.getElementById('contactName').value = '';
            document.getElementById('contactSubject').value = '';
            document.getElementById('contactMessage').value = '';
            
            addLog(`پیام جدید از ${name} ارسال شد`);
        }

        // Search functions
        function filterNews() {
            const searchTerm = document.getElementById('newsSearch').value.toLowerCase();
            const newsItems = document.querySelectorAll('#newsGrid .news-item');
            
            newsItems.forEach(item => {
                const title = item.querySelector('h3').textContent.toLowerCase();
                const content = item.querySelector('.news-content').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || content.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function filterAds() {
            const searchTerm = document.getElementById('adsSearch').value.toLowerCase();
            const adItems = document.querySelectorAll('#adsGrid .ad-item');
            
            adItems.forEach(item => {
                const title = item.querySelector('h3').textContent.toLowerCase();
                const content = item.querySelector('.ad-content').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || content.includes(searchTerm)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function loadInitialData() {
            // Load saved admin credentials
            const savedCredentials = localStorage.getItem('adminCredentials');
            if (savedCredentials) {
                try {
                    adminCredentials = JSON.parse(savedCredentials);
                } catch (e) {
                    console.log('Error loading credentials, using defaults');
                }
            }
            console.log('Initial data loaded');
        }

        // Admin functions
        function showAdminLogin() {
            if (isAdminLoggedIn) {
                showSection('admin-panel');
            } else {
                showSection('admin-login');
            }
        }

        function adminLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            const errorMessage = document.getElementById('adminErrorMessage');
            
            if (username === adminCredentials.username && password === adminCredentials.password) {
                isAdminLoggedIn = true;
                localStorage.setItem('adminLoggedIn', 'true');
                localStorage.setItem('loginTime', new Date().toISOString());
                showSection('admin-panel');
                
                // Clear form
                document.getElementById('adminUsername').value = '';
                document.getElementById('adminPassword').value = '';
                
                // Update admin link
                document.getElementById('adminLink').textContent = '⚙️ پنل مدیریت';
                
                // Update bot status in admin panel
                updateAdminBotStatus();
                
                addLog(`مدیر ${username} وارد سیستم شد`);
            } else {
                errorMessage.style.display = 'block';
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
                addLog(`تلاش ناموفق برای ورود با نام کاربری: ${username}`);
            }
        }

        function adminLogout() {
            const username = localStorage.getItem('adminUsername') || adminCredentials.username;
            isAdminLoggedIn = false;
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('loginTime');
            document.getElementById('adminLink').textContent = '🔐 مدیریت';
            showSection('home');
            addLog(`مدیر ${username} از سیستم خارج شد`);
        }

        function showAdminTab(tabName) {
            // Hide all admin tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            const targetTab = document.getElementById('admin-tab-' + tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // Update active tab button
            const tabButtons = document.querySelectorAll('.admin-tab');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        function updateCredentials(event) {
            event.preventDefault();
            
            const newUsername = document.getElementById('newUsername').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (newPassword !== confirmPassword) {
                alert('رمز عبور و تکرار آن یکسان نیستند');
                return;
            }
            
            if (newPassword.length < 6) {
                alert('رمز عبور باید حداقل 6 کاراکتر باشد');
                return;
            }
            
            // Update credentials
            adminCredentials.username = newUsername;
            adminCredentials.password = newPassword;
            
            // Save to localStorage
            localStorage.setItem('adminCredentials', JSON.stringify(adminCredentials));
            
            // Show success message
            const successMsg = document.getElementById('credentialsSuccessMessage');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
            
            // Clear form
            document.getElementById('newUsername').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            
            addLog(`اطلاعات ورود به نام کاربری ${newUsername} تغییر یافت`);
        }

        function addContent() {
            const title = document.getElementById('contentTitle').value;
            const body = document.getElementById('contentBody').value;
            const source = document.getElementById('contentSource').value;
            const type = document.getElementById('contentType').value;
            const price = document.getElementById('contentPrice').value;
            
            if (!title || !body) {
                alert('لطفا عنوان و محتوا را پر کنید');
                return;
            }
            
            // Create content object
            const content = {
                id: Date.now(),
                title: title,
                content: body,
                source: source || 'مدیر سیستم',
                url: source || '#',
                price: price,
                date: new Date().toISOString(),
                category: type
            };
            
            // Add to appropriate data array
            if (type === 'news') {
                newsData.push(content);
                updateNewsDisplay();
            } else if (type === 'ad') {
                adsData.push(content);
                updateAdsDisplay();
            }
            
            updateStats();
            
            // Show success message
            const successMsg = document.getElementById('contentSuccessMessage');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
            
            addLog(`محتوای جدید اضافه شد: ${title} (نوع: ${type})`);
        }

        function clearContentForm() {
            document.getElementById('contentTitle').value = '';
            document.getElementById('contentBody').value = '';
            document.getElementById('contentSource').value = '';
            document.getElementById('contentPrice').value = '';
            addLog('فرم محتوا پاک شد');
        }

        function saveAdminSettings() {
            const settings = {
                updateInterval: document.getElementById('updateInterval').value,
                maxNews: document.getElementById('maxNews').value,
                maxAds: document.getElementById('maxAds').value,
                defaultLanguage: document.getElementById('defaultLanguage').value,
                adminEmail: document.getElementById('adminEmail').value,
                supportWhatsApp: document.getElementById('supportWhatsApp').value
            };
            
            localStorage.setItem('adminSettings', JSON.stringify(settings));
            
            // Show success message
            const successMsg = document.getElementById('settingsSuccessMessage');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
            
            addLog('تنظیمات سیستم ذخیره شد');
        }

        function resetSettings() {
            if (confirm('آیا مطمئن هستید که می‌خواهید تنظیمات را به حالت پیش‌فرض برگردانید؟')) {
                localStorage.removeItem('adminSettings');
                
                // Reset form values
                document.getElementById('updateInterval').value = '1';
                document.getElementById('maxNews').value = '200';
                document.getElementById('maxAds').value = '100';
                document.getElementById('defaultLanguage').value = 'fa';
                document.getElementById('adminEmail').value = 'admin@winstonfamily.ir';
                document.getElementById('supportWhatsApp').value = '+98 935 405 2684';
                
                addLog('تنظیمات به حالت پیش‌فرض برگردانده شد');
                alert('تنظیمات بازنشانی شد');
            }
        }

        function saveSourceSettings() {
            const newsSources = document.getElementById('newsSources').value;
            const adsSources = document.getElementById('adsSources').value;
            
            localStorage.setItem('newsSources', newsSources);
            localStorage.setItem('adsSources', adsSources);
            
            addLog('تنظیمات منابع ذخیره شد');
            alert('تنظیمات منابع با موفقیت ذخیره شد');
        }

        // Bot control functions for admin
        function startNewsBot() {
            addLog('ربات اخبار دستی شروع شد');
            collectNews();
        }

        function stopNewsBot() {
            if (botIntervals.news) {
                clearInterval(botIntervals.news);
                addLog('ربات اخبار متوقف شد');
            }
        }

        function runNewsBot() {
            addLog('اجرای فوری ربات اخبار...');
            collectNews();
        }

        function startAdsBot() {
            addLog('ربات آگهی‌ها دستی شروع شد');
            collectAds();
        }

        function stopAdsBot() {
            if (botIntervals.ads) {
                clearInterval(botIntervals.ads);
                addLog('ربات آگهی‌ها متوقف شد');
            }
        }

        function runAdsBot() {
            addLog('اجرای فوری ربات آگهی‌ها...');
            collectAds();
        }

        function updateAdminBotStatus() {
            const now = new Date();
            const nextRun = new Date(now.getTime() + 60 * 60 * 1000); // Next hour
            
            const adminNewsBotLastRun = document.getElementById('adminNewsBotLastRun');
            const adminNewsBotNext = document.getElementById('adminNewsBotNext');
            const adminAdsBotLastRun = document.getElementById('adminAdsBotLastRun');
            const adminAdsBotNext = document.getElementById('adminAdsBotNext');
            
            if (adminNewsBotLastRun) adminNewsBotLastRun.textContent = now.toLocaleString('fa-IR');
            if (adminNewsBotNext) adminNewsBotNext.textContent = nextRun.toLocaleString('fa-IR');
            if (adminAdsBotLastRun) adminAdsBotLastRun.textContent = now.toLocaleString('fa-IR');
            if (adminAdsBotNext) adminAdsBotNext.textContent = nextRun.toLocaleString('fa-IR');
        }

        // Check admin login status on page load
        function checkAdminStatus() {
            const loggedIn = localStorage.getItem('adminLoggedIn');
            const loginTime = localStorage.getItem('loginTime');
            
            // Check if login is expired (24 hours)
            if (loginTime) {
                const loginDate = new Date(loginTime);
                const now = new Date();
                const hoursDiff = (now - loginDate) / (1000 * 60 * 60);
                
                if (hoursDiff > 24) {
                    adminLogout();
                    return;
                }
            }
            
            if (loggedIn === 'true') {
                isAdminLoggedIn = true;
                document.getElementById('adminLink').textContent = '⚙️ پنل مدیریت';
            }
        }

        // Logging system
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleString('fa-IR');
            const logEntry = {
                timestamp: timestamp,
                message: message,
                type: type
            };
            
            systemLogs.push(logEntry);
            
            // Keep only last 1000 logs
            if (systemLogs.length > 1000) {
                systemLogs = systemLogs.slice(-1000);
            }
            
            console.log(`[${timestamp}] ${type.toUpperCase()}: ${message}`);
        }

        // Auto-logout after inactivity
        let inactivityTimer;
        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                if (isAdminLoggedIn) {
                    addLog('خروج خودکار به دلیل عدم فعالیت');
                    adminLogout();
                    alert('به دلیل عدم فعالیت، از سیستم خارج شدید');
                }
            }, 30 * 60 * 1000); // 30 minutes
        }

        // Reset timer on user activity
        document.addEventListener('mousemove', resetInactivityTimer);
        document.addEventListener('keypress', resetInactivityTimer);
        document.addEventListener('click', resetInactivityTimer);

        // Initialize inactivity timer
        resetInactivityTimer();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97b0bb72f5738fda',t:'MTc1NzE5MDcxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
